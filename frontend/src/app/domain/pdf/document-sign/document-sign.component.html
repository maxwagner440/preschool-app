
<div class="submit-section d-flex justify-content-between bg-dark text-light">
  <div>
    <button class="btn btn-primary" (click)="openSignModal(1)">Signature One</button>
    <span *ngIf="!!signaturePad1" class="text-success mx-2">
      <i class="bi bi-check-circle-fill"></i> <!-- Bootstrap icon -->
    </span>
  </div>
  <div>
    <button class="btn btn-primary" (click)="openSignModal(2)">Signature Two</button>
    <span *ngIf="!!signaturePad2" class="text-success mx-2">
      <i class="bi bi-check-circle-fill"></i> <!-- Bootstrap icon -->
    </span>
  </div>
</div>

@if(signaturePad1 && signaturePad2) {
  <div class="d-flex justify-content-end bg-dark text-light mt-3">
    <button class="btn btn-primary"  (click)="saveSignatures()">Save Document</button>
  </div>

  <div class="d-flex justify-content-end bg-dark text-light mt-3">
    <button class="btn btn-primary" (click)="downloadSignedPdf()">Download Signed PDF</button>
  </div>
}

<!-- In your component template -->
<ng-template #signModal>
  <div class="modal-backdrop" (click)="closeSignModal()"></div>
  <div class="modal-content bg-dark text-light">
    <button
      type="button"
      class="btn-close position-absolute top-0 end-0 m-2 text-light"
      aria-label="Close"
      (click)="closeSignModal()"
    ></button>
    <h3>Sign the Document</h3>

    <!-- <div class="name-fields d-flex flex-column align-items-start my-3">
      <div class="input-group bg-dark text-light">
        <span class="input-group-text bg-dark text-light">F/L Name</span>
        <input type="text" aria-label="First name" class="form-control bg-dark text-light">
        <input type="text" aria-label="Last name" class="form-control bg-dark text-light">
      </div>
    </div> -->

    <div class="name-fields d-flex flex-column align-items-start gap-3 my-3">
      <div class="input-group bg-dark text-light">
        <span class="input-group-text bg-dark text-light" id="inputGroup-sizing-default">First Name</span>
        <input type="text" class="form-control bg-dark text-light" [(ngModel)]="parentFirstName" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
      </div>
      <div class="input-group bg-dark text-light">
        <span class="input-group-text bg-dark text-light" id="inputGroup-sizing-default">Last Name</span>
        <input type="text" class="form-control bg-dark text-light" [(ngModel)]="parentLastName" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
      </div>
    </div>


    <canvas #signaturePad></canvas>

    <div class="mt-2 d-flex justify-content-end">
      <div *ngIf="signaturePadError">
        <p class="text-danger">Please provide both signatures and names.</p>
      </div>
      <button class="btn btn-secondary me-2" (click)="clearSignature()">Clear</button>
      <button class="btn btn-primary" (click)="saveSignature()">Save Signature</button>
    </div>
  </div>
</ng-template>

<!-- Trigger the modal -->
<div *ngIf="showSignModal">
  <ng-container *ngTemplateOutlet="signModal"></ng-container>
</div>
